# v1.20.0 (Minor Release)

**Status**: Released

<!-- alex-c-line-start-release-summary -->
This is a new minor release of the `alex-c-line` package. It introduces new features in a backwards-compatible way and should require very little refactoring, if any. Please read the description of changes below.
<!-- alex-c-line-end-release-summary -->

## Description of Changes

- So, what's this file doing in a different folder to usual, I hear you asking?
- Well, I've just made a huge change to the release note templating system that changes the entire directory layout.
    - The previous system grouped by version type, so if you wanted to find, say, v2.1.0 and v2.1.1, for example, they'd be completely separate from each other in the directory despite clearly being related and should therefore be grouped more closely. That is, we would've had `docs/releases/minor/v2.1.0.md` and `docs/releases/patch/v2.1.1.md`.
    - The new grouping changes this by grouping by major version, then minor within each major group. That is, those exact same files would be located in `docs/releases/v2/v2.1/v2.1.0.md` and `docs/releases/v2/v2.1/v2.1.1.md`. This is so much clearer and easier to navigate because it groups all v2-related files together, and then all v2.1-related files also get grouped together, rather than a bunch of unrelated major releases all scattered around the major folder.
- I have also changed the documents themselves to be actual markdown files rather than being stringly constructed like they have been up to this point.
    - If you are looking at the raw markdown behind this release note, you may've noticed those comments around the summary. This is part of the new changes - it allows us to extract that part more cleanly and clearly check to see if it matches the template. The comments themselves are unnoticed in the final rendered release note, but they help with the templating.
    - I also normalise the contents between the comments when checking against the templates so that in the case where formatters may apply slightly different styling to the summary, it won't report a false positive and mark the document as invalid. This now makes it possible for us to start formatting the markdown files, which is really exciting!
    - `get-major-version` and `get-minor-version` have also both been added as command-line helpers to get the folder names in GitHub Actions.
- All of the above are being introduced in `-2`-suffixed commands, while the original remains as is to help with the migration, hence why this is only a minor release rather than a major. Once `alex-c-line` v2 comes out, the original commands will be removed and the `-2`-suffixed ones will become the canonical ones.
- `create-release-note-2` also has support for passing in an actual version number using `--target`, in case you want to generate for a specific version number.
- `set-release-status-2` also has support for passing in an actual status (either "In progress" or "Released") so should you, for some reason, need to manually set a document back to In progress through the command-line, you can do that too.

## Migration Notes

- First of all, run the command `migrate-release-notes` to automatically refactor your `docs/releases` directory to the new pattern.
    - We HIGHLY recommend that you have a backup of your initial project state before running the command in case any unexpected side effects occur.
    - I'd say it's easiest to ensure that you have no staged changes when running this so that going back to the initial state just means running `git reset --hard`.
    - All I'll say is, if you're really creating a serious project that would warrant such a feature, but you're doing it without a Git repository, that's entirely on you at that point. I hope you like living on the edge!
- Next, wherever you're relying on `alex-c-line create-release-note` in any of your scripts and/or workflows, replace this with `alex-c-line create-release-note-2`. This command uses the new directory and markdown templates
- Do the same for `alex-c-line set-release-status` to `alex-c-line set-release-status-2`.

## Rules for Creating Release Notes

- Never manually edit anything in-between `<!-- alex-c-line-start-release-summary -->` and `<!-- alex-c-line-end-release-summary -->`. This will mess with the automation. You are allowed to run a formatter on it, but never manually edit the wording itself.
- All documents MUST have the title and status, where the title is the version number with the release type, and the status is either `"In progress"` or `"Released"`.
    - These are also generated by `alex-c-line` and so they must also never be edited.
    - The release status ESPECIALLY must never be edited as it often gets changed when we run `alex-c-line set-release-status`.
- All documents MUST have a `## Description of Changes` heading.
- Major version documents MUST have a `## Migration Notes` section.
- Beyond that, you are allowed to add to, or remove from, any other part of the document. The `## Additional Notes` section is often generated alongside the document but plays no important role in the actual docs checks/releases and can be included or removed as desired.
- All of this will be added to `CONTRIBUTING.md` once the dust settles and this releases.

## Additional Notes

- Getting this one out in particular is going to be very fiddly!
- You see, `alex-c-line` plays an important part in my release process, right? My GitHub Actions uses `alex-c-line`'s release note commands to verify that documents are in good shape before we release.
- However... `alex-c-line` also has to use my GitHub Actions so it can publish itself. The actions in that repository assume the old folder structure which we are no longer using so we need to change my GitHub Actions to use the newest version of `alex-c-line` that does support the new structure, but we can't do that until we publish `alex-c-line`...
- So, I think what the plan will be is, I'm going to copy over the publish scripts from the repository over here, push up and let the publish happen as usual, and then hopefully we'd still be able to get this release out for everywhere else to use.
- From there, we need to release a new version of my actions repository to pin down `alex-c-line` at v1.19.3. This will allow us to ensure that even when v2 comes out and the initial release commands are gone for good, there is at least **one** version of my actions repository that will definitely support the old release structure should people still need it (even though I do consider my workflows to be internal to this organisation, but I suppose they are also reusable workflows that anyone can use...).
- After releasing that, I will then change the actions in the GitHub Actions repository to support the new file system, with `alex-c-line` at latest again.
- The release notes in that repository may also be migrated, and if that works, we can then just update actions everywhere else.
- So... hopefully I don't break `alex-c-line` deployments in the process! If you're seeing this as a GitHub Releases page, then we know at least the initial phase of releasing this worked out. But if it hasn't gone up yet and it is 10am on Thursday 22nd January, then safe to assume that something has gone terribly wrong and we should refrain from putting up pull requests in this organisation until I deal with it.
- Well, let's give it a go then, why don't we? Wish me luck!
